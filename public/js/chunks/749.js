"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[749],{65749:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});var n=r(67294),o=r(10267),a=r(51252),s=r(56941),c=r(91121),i=r(14416),u=r(45697),l=r.n(u),f=r(44515),b=r(58298),p=r(64178);var d=r(65551),O=r(9386),m=r(83351),j=r(99716),y=r(48521);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){var t=e.onSaveBookRequest,r=e.handleSubmit,s=e.initialValues,c=(0,n.createRef)(),i=(0,p.G_)(d.mi);(0,n.useEffect)((function(){c.current.focus()}),[]);return(0,y.jsxs)(o.Z,{className:"animated fadeIn m-3",children:[(0,y.jsx)(a.Z,{xs:12,children:(0,y.jsx)(f.Z,{name:"book_name",label:"books.table.book.column",required:!0,inputRef:c,groupText:"book",component:O.Z,readOnly:!0})}),(0,y.jsx)(a.Z,{xs:12,children:(0,y.jsx)(f.Z,{name:"isbn",label:"book-request.input.isbn.label",required:!0,groupText:"id-card",component:O.Z,readOnly:!0})}),(0,y.jsx)(a.Z,{xs:12,children:(0,y.jsx)(f.Z,{name:"edition",label:"book-request.input.edition.label",required:!0,groupText:"file-text",component:O.Z,readOnly:!0})}),(0,y.jsx)(a.Z,{xs:12,children:(0,y.jsx)(f.Z,{name:"format",label:"book-request.select.format.label",required:!0,options:i,placeholder:"book-request.select.format.placeholder",groupText:"wpforms",component:m.Z,disabled:!0})}),(0,y.jsx)(a.Z,{xs:12,children:(0,y.jsx)(f.Z,{name:"status",label:"books-circulation.select.status.label",required:!0,options:function(){var e=(0,p.G_)(d.m3);switch(s.status.id){case d.Qt.APPROVED:return e.filter((function(e){return e.id!==d.Qt.PENDING}));case d.Qt.AVAILABLE:return e.filter((function(e){return e.id!==d.Qt.PENDING||e.id!==d.Qt.APPROVED}));case d.Qt.CANCEL:return e.filter((function(e){return e.id===d.OI.CANCEL}));default:return e}}(),groupText:"info-circle",placeholder:"books-circulation.select.status.placeholder",component:m.Z})}),(0,y.jsx)(a.Z,{xs:12,children:(0,y.jsx)(j.Z,h({onSave:r((function(e){var r=e.status;t(r.id)}))},e))})]})};P.propTypes={initialValues:l().object,onSaveBookRequest:l().func,handleSubmit:l().func};const k=(0,b.Z)({form:"bookRequestForm",validate:function(e){var t={};return e.first_name||(t.first_name=(0,p.PV)("profile.input.first-name.validate.label")),t}})(P);var x=r(74866),w=r(64687),R=r.n(w),E=r(79352),q=r(80677),D=r(76374),Z=r(44411),B=r(30193),S=r(35248),_=r(96486),A=r.n(_),C=r(54848);function N(e,t,r,n,o,a,s){try{var c=e[a](s),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){N(a,n,o,s,c,"next",e)}function c(e){N(a,n,o,s,c,"throw",e)}s(void 0)}))}}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){var t=e.addBookRequest,r={onSaveBookRequest:function(e){t(e)},onCancel:e.toggleModal};return(0,y.jsx)(x.Z,I(I({},e),{},{content:(0,y.jsx)(k,I({},r))}))};M.propTypes={addBookRequest:l().func,toggleModal:l().func};const L=(0,i.$j)(null,{addBookRequest:function(e){return function(){var t=T(R().mark((function t(r){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.Z.post(C.BC.BOOK_REQUEST,e).then((function(e){r({type:d.$e.ADD_ADMIN_BOOK_REQUEST,payload:e.data.data}),r((0,D.fz)({text:(0,p.PV)("book-request.success.create.message")})),r((0,Z.$)())})).catch((function(e){var t=e.response;r((0,D.fz)({text:t.data.message,type:d.rW.ERROR}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(M);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(e){var t=e.bookRequest,r=e.editBookRequest,n=e.toggleModal,o=(0,p.G_)(d.mi),a=(0,p.G_)(d.m3),s={onSaveBookRequest:function(e){r(t,e)},onCancel:n,initialValues:{book_name:t.book_name,isbn:t.isbn,edition:t.edition,format:o.find((function(e){return e.id===+t.format})),status:a.find((function(e){return e.id===+t.status}))}};return(0,y.jsx)(x.Z,$($({},e),{},{content:(0,y.jsx)(k,$({},s))}))};G.propTypes={bookRequest:l().object,editBookRequest:l().func,toggleModal:l().func};const z=(0,i.$j)(null,{editBookRequest:function(e,t){return function(){var r=T(R().mark((function r(n){return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.Z.put(C.BC.BOOK_REQUEST+"/"+e.id+"/status/"+t,{}).then((function(e){n({type:d.$e.EDIT_ADMIN_BOOK_REQUEST,payload:e.data.data}),n((0,D.fz)({text:(0,p.PV)("book-request.success.edit.message")})),n((0,Z.$)())})).catch((function(e){var t=e.response;n((0,D.fz)({text:t.data.message,type:d.rW.ERROR}))}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})(G);var W=r(49847);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=function(e){var t=e.bookRequestId,r=e.deleteBookRequest,n=e.toggleModal;return(0,y.jsx)(x.Z,H(H({},e),{},{actions:(0,y.jsx)(W.Z,{onDelete:function(){r(t)},onCancel:n})}))};X.propTypes={bookRequestId:l().number,deleteBookRequest:l().func,toggleModal:l().func};const Y=(0,i.$j)(null,{deleteBookRequest:function(e){return function(){var t=T(R().mark((function t(r){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.Z.delete(C.BC.BOOK_REQUEST+"/"+e).then((function(){r({type:d.$e.DELETE_ADMIN_BOOK_REQUEST,payload:e}),r((0,D.fz)({text:(0,p.PV)("book-request.success.delete.message")})),r((0,Z.$)())})).catch((function(e){var t=e.response;r((0,D.fz)({text:t.data.message,type:d.rW.ERROR}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(X);var ee=r(40887);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=function(e){var t=e.bookRequest,r=e.isCreate,n=e.isEdit,o=e.isDelete,a={bookRequest:t},s={bookRequestId:t?t.id:null},c={modalTitle:(0,p.OH)(r,n,o,"book-request.input.new-btn.label","book-request.modal.edit.title","book-request.modal.delete.title"),NewComponent:L,EditComponent:z,DeleteComponent:Y,deleteKey:t?t.book_name:null,editConfig:a,delConfig:s,props:e};return(0,y.jsx)(ee.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c))};ne.propTypes={author:l().object,isCreate:l().bool,isEdit:l().bool,isDelete:l().bool};const oe=ne;var ae=r(97089),se=r(30475),ce=r(70212),ie=r(4838),ue=r(46028),le=r(44007);function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var me=function(e){var t=e.bookRequests,r=e.toggleModal,n=e.totalRecord,i=e.isLoading,u=e.fetchBookRequests,l=de((0,le.h7)(),5),f=l[0],b=l[1],O=l[2],m=l[3],j=l[4],g={bookRequest:m,isCreate:f,isEdit:b,isDelete:O,toggleModal:r},h=(0,p.G_)(d.mi),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];j(e,t,n),r()},P=[{name:(0,p.PV)("book-request.input.isbn.label"),selector:"isbn",sortable:!0,cell:function(e){return(0,y.jsx)("span",{children:e.isbn})},minWidth:"200px"},{name:(0,p.PV)("books.table.book.column"),selector:"book_name",sortable:!0,cell:function(e){return(0,y.jsx)("span",{children:e.book_name})}},{name:(0,p.PV)("book-request.input.edition.label"),selector:"edition",sortable:!0,cell:function(e){return(0,y.jsx)("span",{children:e.edition})}},{name:(0,p.PV)("book-request.select.format.label"),selector:"format",sortable:!0,cell:function(e){var t=h.find((function(t){return t.id===e.format}));if(t)return t.name}},{name:(0,p.PV)("book-request.count.label"),selector:"request_count",sortable:!0,center:!0,cell:function(e){return e.request_count}},{name:(0,p.PV)("react-data-table.status.column"),selector:"status",sortable:!0,center:!0,cell:function(e){return(0,y.jsx)(ue.Z,{status:e.status})}},{name:(0,p.PV)("react-data-table.action.column"),selector:"id",right:!0,cell:function(e){return k(e)},ignoreRowClick:!0,allowOverflow:!0,button:!0}],k=function(e){switch(e.status){case d.Qt.APPROVED:case d.Qt.PENDING:return(0,y.jsx)(ce.Z,{onOpenModal:v,item:e,isHideDeleteIcon:!0});case d.Qt.AVAILABLE:case d.Qt.CANCEL:default:return""}};return(0,y.jsxs)(o.Z,{className:"animated fadeIn",children:[(0,y.jsxs)(a.Z,{sm:12,className:"mb-2",children:[(0,y.jsx)(ae.Z,{title:"Books Request"}),(0,y.jsx)("h5",{className:"page-heading",children:(0,p.PV)("book-request.title")}),(0,y.jsx)(ie.Z,{})]}),(0,y.jsx)(a.Z,{sm:12,children:(0,y.jsx)("div",{className:"sticky-table-container",children:(0,y.jsx)(s.Z,{children:(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(se.Z,{items:t,columns:P,loading:i,emptyStateMessageId:"book-request.empty-state.title",emptyNotFoundStateMessageId:"book-request.not-found.empty-state.title",totalRows:n,onChange:function(e){u(e,!0)},icon:C.qv.BOOK_REQUEST}),(0,y.jsx)(oe,be({},g))]})})})})]})};me.propTypes={adminBookRequests:l().array,totalRecord:l().number,isLoading:l().bool,fetchBookRequests:l().func,toggleModal:l().func};const je=(0,i.$j)((function(e){return{bookRequests:e.adminBookRequests,isLoading:e.isLoading,totalRecord:e.totalRecord}}),{fetchBookRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var r=T(R().mark((function r(n){var o;return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t&&n((0,q.K)(!0)),o=C.BC.BOOK_REQUEST,!A().isEmpty(e)&&(e.limit||e.order_By||e.search||e.direction)&&(o+=(0,B.Z)(e)),r.next=5,E.Z.get(o).then((function(e){n({type:d.$e.FETCH_ADMIN_BOOKS_REQUEST,payload:e.data.data}),n((0,S.Q)(e.data.totalRecords)),t&&n((0,q.K)(!1))})).catch((function(e){var r=e.response;n((0,D.fz)({text:r.data.message,type:d.rW.ERROR})),t&&n((0,q.K)(!1))}));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},toggleModal:Z.$})(me)},46028:(e,t,r)=>{r.d(t,{Z:()=>u});r(67294);var n=r(45697),o=r.n(n),a=r(54848),s=r(64178),c=r(48521),i=function(e){switch(e.status){case a.eE.PENDING:return(0,c.jsx)("span",{className:"text-warning",children:(0,c.jsx)("strong",{children:(0,s.PV)("book-request.filter.pending.label")})});case a.eE.APPROVED:return(0,c.jsx)("span",{className:"text-success",children:(0,c.jsx)("strong",{children:(0,s.PV)("book-request.filter.approved.label")})});case a.eE.AVAILABLE:return(0,c.jsx)("span",{className:"text-info",children:(0,c.jsx)("strong",{children:(0,s.PV)("book-request.filter.available.label")})});default:return(0,c.jsx)("span",{className:"text-danger",children:(0,c.jsx)("strong",{children:(0,s.PV)("book-request.filter.cancel.label")})})}};i.propTypes={status:o().number};const u=i}}]);