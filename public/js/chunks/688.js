(self.webpackChunk=self.webpackChunk||[]).push([[688],{16688:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>le});var r=n(67294),o=n(14416),i=n(10267),a=n(51252),s=n(56941),c=n(91121),l=n(45697),u=n.n(l),p=n(96486),d=n.n(p),h=n(44515),f=n(58298),m=n(64178);var g=n(72446),v=n.n(g),b=n(82809),y={insert:"head",singleton:!1};v()(b.Z,y);b.Z.locals;var x=n(46712),_=n(65551),w=n(83351),O=n(9386),C=n(99716),D=n(53112),S=n(64687),E=n.n(S),R=n(96120),j=n.n(R),k=n(74866),P=n(44641),N=(n(75048),n(48521));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=null,F=function(e){var t=e.image,n=e.emitFileChange,o=e.onSave,i=e.onCancel,a=e.isToggle,s=e.isFavicon,c=void 0!==s&&s,l=T((0,r.useState)({aspect:16/9,unit:"px",width:50,height:50}),2),u=l[0],p=l[1],d=T((0,r.useState)(null),2),h=d[0],f=d[1],g=function(){var e,t=(e=E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(B&&t.width&&t.height)){e.next=4;break}return e.next=3,v(B,t,"newFile.jpeg");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){M(i,r,o,a,s,"next",e)}function s(e){M(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),v=function(e,t,r){var o=document.createElement("canvas"),i=e.naturalWidth/e.width,a=e.naturalHeight/e.height;return o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(e,t.x*i,t.y*a,t.width*i,t.height*a,0,0,t.width,t.height),new Promise((function(e,t){o.toBlob((function(t){t&&(t.name=r,t.lastModifiedDate=new Date,n(t,h),e(window.URL.createObjectURL(t)))}),"image/jpeg")}))},b={src:t,crop:u,onImageLoaded:function(e){B=e},onComplete:function(e){g(e).then((function(e){f(e)}))},onChange:function(e,t){p(e)}};c&&(b=A(A({},b),{minHeight:50,maxHeight:50,minWidth:50,maxWidth:50}));var y={className:"membership-plan-modal",title:(0,m.PV)("image-cropper.modal.title"),content:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(j(),A({},b)),h&&(0,N.jsxs)("div",{className:"mt-2",children:[(0,N.jsx)("h5",{children:"Preview"}),(0,N.jsx)("hr",{}),(0,N.jsx)("div",{className:"text-center",children:(0,N.jsx)("img",{alt:"Crop",className:"react-img-cropper__img",src:h})})]})]}),actions:(0,N.jsx)(P.Z,{onConfirm:o,onCancel:i})};return t&&a?(0,N.jsx)(k.Z,A({},y)):null};F.propTypes={image:u().string,isToggle:u().bool,isFavicon:u().bool,emitFileChange:u().func,onSave:u().func,onCancel:u().func};const Y=F;var U=n(44411),V=n(44007);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.currencies,n=e.initialValues,o=e.change,s=e.onChangeAppLogo,c=e.toggleModal,l=e.onSaveSettings,u=e.handleSubmit,p=e.onChangeAppFavicon,d=H((0,r.useState)(n.currency?n.currency.symbol:null),2),f=d[0],g=d[1],v=(0,r.createRef)(),b=H((0,r.useState)(null),2),y=b[0],S=b[1],E=H((0,r.useState)(null),2),R=E[0],j=E[1],k=H((0,r.useState)(!1),2),P=k[0],I=k[1],A=H((0,r.useState)(!1),2),Z=A[0],M=A[1],T=H((0,V.bH)(o,x.F_.APP_LOGO,x.F_.APP_LOGO,!n.library_logo),5),L=T[0],B=T[1],F=T[2],U=T[3],K=T[4],q=H((0,V.bH)(o,x.F_.APP_FAVICON,x.F_.APP_FAVICON,!n.library_favicon),5),z=q[0],X=q[1],G=q[2],$=q[3],J=q[4],Q=(0,m.G_)(_.V1);(0,r.useEffect)((function(){v.current.focus()}),[]),(0,r.useEffect)((function(){document.querySelector(".inputBox").addEventListener("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()})),document.querySelector(".inputBox1").addEventListener("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()})),document.querySelector(".inputBox2").addEventListener("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()})),document.querySelector(".inputBox3").addEventListener("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()})),document.querySelector(".inputBox4").addEventListener("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()})),document.querySelector(".inputBox5").addEventListener("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()}))}),[]);var ee=function(e,t,n){return{key:e,value:t,display_name:n}},te=function(){c()},ne={image:n.library_logo?n.library_logo:x.F_.APP_LOGO,isDefaultImage:B,buttonName:"image-picker.dropdown.logo.label",onRemovePhoto:function(){s(null),K()},onFileChange:function(e){S(F),U(e),M(!1),I(!0),c()},isRemoveOption:!1,inputField:"logo-picker"},re={image:L,emitFileChange:function(e){S(e)},onSave:function(){Z?p(y):s(y),c()},onCancel:te,isToggle:P},oe={image:n.library_favicon?n.library_favicon:x.F_.APP_LOGO,isDefaultImage:X,buttonName:"image-picker.dropdown.favicon.label",onRemovePhoto:function(){p(null),J()},onFileChange:function(e){j(G),$(e),I(!1),M(!0),c()},isRemoveOption:!1,inputField:"favicon-picker",isFavicon:!0},ie={image:z,emitFileChange:function(e){j(e)},onSave:function(){p(R),c()},onCancel:te,isToggle:Z,isFavicon:!0};return(0,N.jsxs)(i.Z,{className:"settings",children:[(0,N.jsxs)(a.Z,{xs:2,className:"settings__logo",children:[(0,N.jsx)("h6",{className:"settings__logo-heading",children:(0,m.PV)("image-picker.dropdown.logo.label")}),(0,N.jsxs)("div",{children:[(0,N.jsx)(h.Z,{name:"file_name",type:"hidden",component:O.Z}),(0,N.jsx)(Y,W({},re)),(0,N.jsx)(D.Z,W({},ne))]}),(0,N.jsx)("h6",{className:"settings__favicon-heading mt-3",children:(0,m.PV)("image-picker.dropdown.favicon.label")}),(0,N.jsxs)("div",{children:[(0,N.jsx)(h.Z,{name:"file_name",type:"hidden",component:O.Z}),(0,N.jsx)(Y,W({},ie)),(0,N.jsx)(D.Z,W({},oe))]})]}),(0,N.jsx)(a.Z,{xs:10,className:"settings__form",children:(0,N.jsxs)(i.Z,{className:"settings__form-columns",children:[(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"library_name",type:"text",label:"settings.input.app-name.label",required:!0,groupText:"list",component:O.Z,inputRef:v})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"currency",label:"settings.select.currency.label",required:!0,groupText:f,options:t,onChange:function(e){e&&g(e.symbol)},isDefaultCurrency:!0,placeholder:"settings.select.currency.placeholder",component:w.Z,isSearchable:!0})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"issue_due_days",className:"inputBox",type:"number",label:"settings.input.issue-due-days.label",min:"0",required:!0,groupText:"calendar",component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"return_due_days",className:"inputBox1",type:"number",label:"settings.input.return-due-days.label",min:"0",required:!0,groupText:"calendar",component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"issue_books_limit",className:"inputBox2",type:"number",label:"settings.input.max-issue-books-limit.label",min:"0",required:!0,groupText:"calendar",component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"reserve_books_limit",className:"inputBox3",type:"number",label:"settings.input.max-reserve-books-limit.label",min:"0",required:!0,groupText:"calendar",component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"book_due_reminder_before_days",type:"number",className:"inputBox4",label:"settings.input.book-due-reminder-before-days.label",min:"0",required:!0,groupText:"calendar",component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"penalty_per_day",type:"number",className:"inputBox5",label:"settings.input.penalty.label",min:"0",isDefaultCurrency:!0,required:!0,groupText:f,component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"language",label:"settings.select.language.label",required:!0,groupText:"language",options:Q,placeholder:"settings.select.language.placeholder",component:w.Z,isSearchable:!0})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"stripe_key",type:"text",label:"settings.input.stripe-key.label",groupText:"list",component:O.Z})}),(0,N.jsx)(a.Z,{xs:6,children:(0,N.jsx)(h.Z,{name:"stripe_secret",type:"text",label:"settings.input.stripe-secret.label",groupText:"list",component:O.Z})})]})}),(0,N.jsx)(a.Z,{xs:2,className:"settings__favicon mt-2"}),(0,N.jsx)(a.Z,{xs:12,children:(0,N.jsx)(C.Z,W({onSave:u((function(e){var t=e.currency,n=e.issue_due_days,r=e.return_due_days,o=e.library_name,i=e.language,a=e.reserve_books_limit,s=e.stripe_key,c=e.stripe_secret,u=e.issue_books_limit,p=e.penalty_per_day,d=e.book_due_reminder_before_days,h=[ee(_.rn.CURRENCY,t.id,t.name),ee(_.rn.LIBRARY_NAME,o,_.BN.APP_NAME),ee(_.rn.PENALTY_PER_DAY,p,_.BN.PENALTY_PER_DAY),ee(_.rn.ISSUE_DUE_DAYS,n,_.BN.ISSUE_DUE_DAYS),ee(_.rn.RETURN_DUE_DAYS,r,_.BN.RETURN_DUE_DAYS),ee(_.rn.LANGUAGE,i.id,i.name),ee(_.rn.RESERVE_BOOKS_LIMIT,a,_.BN.RESERVE_BOOKS_LIMIT),ee(_.rn.ISSUE_BOOKS_LIMIT,u,_.BN.ISSUE_BOOKS_LIMIT),ee(_.rn.BOOK_DUE_REMINDER_BEFORE_DAYS,d,_.BN.BOOK_DUE_REMINDER_BEFORE_DAYS),ee(_.rn.STRIPE_KEY,s,_.BN.STRIPE_KEY),ee(_.rn.STRIPE_SECRET,c,_.BN.STRIPE_SECRET)];l(h)})),isHideCancel:!0},e))})]})};X.propTypes={initialValues:u().object,currencies:u().array,onSaveSettings:u().func,handleSubmit:u().func,change:u().func,onChangeAppLogo:u().func,onChangeAppFavicon:u().func,toggleModal:u().func};var G=(0,f.Z)({form:"settingsForm",validate:function(e){var t={};return e.library_name||(t.library_name=(0,m.PV)("settings.input.app-name.validate.label")),e.currency||(t.currency=(0,m.PV)("settings.select.currency.validate.label")),e.issue_due_days||(t.issue_due_days=(0,m.PV)("settings.input.issue-due-days.validate.label")),e.return_due_days||(t.return_due_days=(0,m.PV)("settings.input.return-due-days.validate.label")),e.language||(t.language=(0,m.PV)("settings.select.language.validate.label")),e.reserve_books_limit||(t.language=(0,m.PV)("settings.input.max-reserve-books-limit.validate.label")),e.issue_books_limit||(t.language=(0,m.PV)("settings.input.max-issue-books-limit.validate.label")),e.stripe_key||(t.language=(0,m.PV)("settings.input.stripe-key.validate.label")),e.stripe_secret||(t.language=(0,m.PV)("Stripe secret must be required.")),t},enableReinitialize:!0})(X);const $=(0,o.$j)(null,{toggleModal:U.$})(G);var J=n(4838),Q=n(97089),ee=n(81125);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.currencies,n=e.fetchSettings,o=e.fetchCurrencies,l=e.postSettings,u=e.postAppLogo,p=e.selectedCurrency,d=e.settings,h=e.selectedLanguage,f=e.exist_library_logo,g=e.exist_favicon_logo,v=e.postAppFavicon,b=(0,m.G_)(_.V1);(0,r.useEffect)((function(){n(!0),o()}),[]);var y=function(e,t){return e&&e[t]?e[t].logo_url:null},x={currencies:t,initialValues:{currency:p,issue_due_days:d[_.rn.ISSUE_DUE_DAYS]?d[_.rn.ISSUE_DUE_DAYS].value:null,stripe_key:d[_.rn.STRIPE_KEY]?d[_.rn.STRIPE_KEY].value:null,stripe_secret:d[_.rn.STRIPE_SECRET]?d[_.rn.STRIPE_SECRET].value:null,return_due_days:d[_.rn.RETURN_DUE_DAYS]?d[_.rn.RETURN_DUE_DAYS].value:null,issue_books_limit:d[_.rn.ISSUE_BOOKS_LIMIT]?d[_.rn.ISSUE_BOOKS_LIMIT].value:null,reserve_books_limit:d[_.rn.RESERVE_BOOKS_LIMIT]?d[_.rn.RESERVE_BOOKS_LIMIT].value:null,library_name:d[_.rn.LIBRARY_NAME]?d[_.rn.LIBRARY_NAME].value:null,penalty_per_day:d[_.rn.PENALTY_PER_DAY]?d[_.rn.PENALTY_PER_DAY].value:null,book_due_reminder_before_days:d[_.rn.BOOK_DUE_REMINDER_BEFORE_DAYS]?d[_.rn.BOOK_DUE_REMINDER_BEFORE_DAYS].value:null,library_logo:y(d,_.rn.LIBRARY_LOGO),library_favicon:y(d,_.rn.LIBRARY_FAVICON),language:b.find((function(e){return e.id===h.id}))},onSaveSettings:function(e){l([].concat(oe(e),[f,g]))},onChangeAppLogo:function(e){if(e){var t=new FormData;t.append("logo",e,e.name),u(t)}},onChangeAppFavicon:function(e){if(e){var t=new FormData;t.append("favicon",e,e.name),v(t)}}};return(0,N.jsxs)("div",{className:"animated fadeIn",children:[(0,N.jsx)(J.Z,{}),(0,N.jsx)(Q.Z,{title:"Settings"}),(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(a.Z,{xs:12,className:"mb-2",children:(0,N.jsx)("h5",{className:"page-heading",children:(0,m.PV)("settings.title")})}),(0,N.jsx)(a.Z,{sm:12,children:(0,N.jsx)("div",{className:"sticky-table-container",children:(0,N.jsx)(s.Z,{children:(0,N.jsx)(c.Z,{children:(0,N.jsx)($,ne({},x))})})})})]})]})};ae.propTypes={selectedCurrency:u().object,selectedLanguage:u().object,exist_library_logo:u().object,exist_favicon_logo:u().object,settings:u().object,currencies:u().array,fetchSettings:u().func,fetchCurrencies:u().func,postSettings:u().func,postAppLogo:u().func,postAppFavicon:u().func};var se=function(e){var t=[];return e.forEach((function(e){return t.push({id:e.iso_code,name:e.country,symbol:e.symbol})})),t},ce=function(e,t){var n=e.filter((function(e){return e.key===t})).map((function(e){return{id:e.value,name:e.display_name,symbol:e.currency_symbol}}));if(n.length>0)return{id:n[0].id,name:n[0].name,symbol:n[0].symbol}};const le=(0,o.$j)((function(e){var t=e.currencies,n=e.settings,r=Object.values(n),o=d().mapKeys(r,"key");return{currencies:se(t),selectedCurrency:ce(r,_.rn.CURRENCY),settings:o,selectedLanguage:ce(r,_.rn.LANGUAGE),exist_library_logo:n[_.rn.LIBRARY_LOGO]?n[_.rn.LIBRARY_LOGO]:null,exist_favicon_logo:n[_.rn.LIBRARY_FAVICON]?n[_.rn.LIBRARY_FAVICON]:null}}),{fetchSettings:ee.wv,fetchCurrencies:ee.U$,postSettings:ee.Or,postAppLogo:ee.MO,postAppFavicon:ee.cG})(ae)},44641:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});n(67294);var r=n(45697),o=n.n(r),i=n(97975),a=n(64178),s=n(48521),c=function(e){var t=e.onConfirm,n=e.onCancel;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{color:"success",onClick:t,children:(0,a.PV)("global.input.yes-btn.label")}),(0,s.jsx)(i.Z,{color:"secondary",onClick:n,children:(0,a.PV)("global.input.no-btn.label")})]})};c.propTypes={onConfirm:o().func,onCancel:o().func};const l=c},53112:(e,t,n)=>{"use strict";n.d(t,{Z:()=>G});var r=n(67294),o=n(45697),i=n.n(o),a=n(87462),s=n(63366),c=n(97326),l=n(94578),u=n(94184),p=n.n(u),d=r.createContext({}),h=n(23663),f=["className","cssModule","divider","tag","header","active","text"],m={children:i().node,active:i().bool,disabled:i().bool,divider:i().bool,tag:h.iC,header:i().bool,onClick:i().func,className:i().string,cssModule:i().object,toggle:i().bool,text:i().bool},g=function(e){function t(t){var n;return(n=e.call(this,t)||this).onClick=n.onClick.bind((0,c.Z)(n)),n.getTabIndex=n.getTabIndex.bind((0,c.Z)(n)),n}(0,l.Z)(t,e);var n=t.prototype;return n.getRole=function(){return"listbox"===this.context.menuRole?"option":"menuitem"},n.onClick=function(e){var t=this.props,n=t.disabled,r=t.header,o=t.divider,i=t.text;n||r||o||i?e.preventDefault():(this.props.onClick&&this.props.onClick(e),this.props.toggle&&this.context.toggle(e))},n.getTabIndex=function(){var e=this.props,t=e.disabled,n=e.header,r=e.divider,o=e.text;return t||n||r||o?"-1":"0"},n.render=function(){var e=this.getTabIndex(),t=e>-1?this.getRole():void 0,n=(0,h.CE)(this.props,["toggle"]),o=n.className,i=n.cssModule,c=n.divider,l=n.tag,u=n.header,d=n.active,m=n.text,g=(0,s.Z)(n,f),v=(0,h.mx)(p()(o,{disabled:g.disabled,"dropdown-item":!c&&!u&&!m,active:d,"dropdown-header":u,"dropdown-divider":c,"dropdown-item-text":m}),i);return"button"===l&&(u?l="h6":c?l="div":g.href?l="a":m&&(l="span")),r.createElement(l,(0,a.Z)({type:"button"===l&&(g.onClick||this.props.toggle)?"button":void 0},g,{tabIndex:e,role:t,className:v,onClick:this.onClick}))},t}(r.Component);g.propTypes=m,g.defaultProps={tag:"button",toggle:!0},g.contextType=d;const v=g;var b=n(81385),y=["className","cssModule","direction","isOpen","group","size","nav","setActiveFromChild","active","addonType","tag","menuRole"],x={a11y:i().bool,disabled:i().bool,direction:i().oneOf(["up","down","left","right"]),group:i().bool,isOpen:i().bool,nav:i().bool,active:i().bool,addonType:i().oneOfType([i().bool,i().oneOf(["prepend","append"])]),size:i().string,tag:h.iC,toggle:i().func,children:i().node,className:i().string,cssModule:i().object,inNavbar:i().bool,setActiveFromChild:i().bool,menuRole:i().oneOf(["listbox","menu"])},_=[h.Do.space,h.Do.enter,h.Do.up,h.Do.down,h.Do.end,h.Do.home],w=function(e){function t(t){var n;return(n=e.call(this,t)||this).addEvents=n.addEvents.bind((0,c.Z)(n)),n.handleDocumentClick=n.handleDocumentClick.bind((0,c.Z)(n)),n.handleKeyDown=n.handleKeyDown.bind((0,c.Z)(n)),n.removeEvents=n.removeEvents.bind((0,c.Z)(n)),n.toggle=n.toggle.bind((0,c.Z)(n)),n.handleMenuRef=n.handleMenuRef.bind((0,c.Z)(n)),n.containerRef=r.createRef(),n.menuRef=r.createRef(),n}(0,l.Z)(t,e);var n=t.prototype;return n.handleMenuRef=function(e){this.menuRef.current=e},n.getContextValue=function(){return{toggle:this.toggle,isOpen:this.props.isOpen,direction:"down"===this.props.direction&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar,disabled:this.props.disabled,onMenuRef:this.handleMenuRef,menuRole:this.props.menuRole}},n.componentDidMount=function(){this.handleProps()},n.componentDidUpdate=function(e){this.props.isOpen!==e.isOpen&&this.handleProps()},n.componentWillUnmount=function(){this.removeEvents()},n.getContainer=function(){return this.containerRef.current},n.getMenu=function(){return this.menuRef.current},n.getMenuCtrl=function(){return this._$menuCtrl||(this._$menuCtrl=this.getContainer().querySelector("[aria-expanded]")),this._$menuCtrl},n.getItemType=function(){return"listbox"===this.context.menuRole?"option":"menuitem"},n.getMenuItems=function(){var e=this.getMenu()||this.getContainer();return[].slice.call(e.querySelectorAll('[role="'+this.getItemType()+'"]'))},n.addEvents=function(){var e=this;["click","touchstart","keyup"].forEach((function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}))},n.removeEvents=function(){var e=this;["click","touchstart","keyup"].forEach((function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)}))},n.handleDocumentClick=function(e){if(!e||3!==e.which&&("keyup"!==e.type||e.which===h.Do.tab)){var t=this.getContainer(),n=this.getMenu(),r=t.contains(e.target)&&t!==e.target,o=n&&n.contains(e.target)&&n!==e.target;(!r&&!o||"keyup"===e.type&&e.which!==h.Do.tab)&&this.toggle(e)}},n.handleKeyDown=function(e){var t=this,n="menuitem"===e.target.getAttribute("role")||"option"===e.target.getAttribute("role"),r=this.getMenuCtrl()===e.target,o=h.Do.tab===e.which;if(!(/input|textarea/i.test(e.target.tagName)||o&&!this.props.a11y||o&&!n&&!r)&&((-1!==_.indexOf(e.which)||e.which>=48&&e.which<=90)&&e.preventDefault(),!this.props.disabled&&(r&&([h.Do.space,h.Do.enter,h.Do.up,h.Do.down].indexOf(e.which)>-1?(this.props.isOpen||this.toggle(e),setTimeout((function(){return t.getMenuItems()[0].focus()}))):this.props.isOpen&&o?(e.preventDefault(),this.getMenuItems()[0].focus()):this.props.isOpen&&e.which===h.Do.esc&&this.toggle(e)),this.props.isOpen&&n)))if([h.Do.tab,h.Do.esc].indexOf(e.which)>-1)this.toggle(e),this.getMenuCtrl().focus();else if([h.Do.space,h.Do.enter].indexOf(e.which)>-1)e.target.click(),this.getMenuCtrl().focus();else if([h.Do.down,h.Do.up].indexOf(e.which)>-1||[h.Do.n,h.Do.p].indexOf(e.which)>-1&&e.ctrlKey){var i=this.getMenuItems(),a=i.indexOf(e.target);h.Do.up===e.which||h.Do.p===e.which&&e.ctrlKey?a=0!==a?a-1:i.length-1:(h.Do.down===e.which||h.Do.n===e.which&&e.ctrlKey)&&(a=a===i.length-1?0:a+1),i[a].focus()}else if(h.Do.end===e.which){var s=this.getMenuItems();s[s.length-1].focus()}else if(h.Do.home===e.which){this.getMenuItems()[0].focus()}else if(e.which>=48&&e.which<=90)for(var c=this.getMenuItems(),l=String.fromCharCode(e.which).toLowerCase(),u=0;u<c.length;u+=1){if((c[u].textContent&&c[u].textContent[0].toLowerCase())===l){c[u].focus();break}}},n.handleProps=function(){this.props.isOpen?this.addEvents():this.removeEvents()},n.toggle=function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)},n.render=function(){var e,t,n=(0,h.CE)(this.props,["toggle","disabled","inNavbar","a11y"]),o=n.className,i=n.cssModule,c=n.direction,l=n.isOpen,u=n.group,f=n.size,m=n.nav,g=n.setActiveFromChild,v=n.active,x=n.addonType,_=n.tag,w=(n.menuRole,(0,s.Z)(n,y)),O=_||(m?"li":"div"),C=!1;g&&r.Children.map(this.props.children[1].props.children,(function(e){e&&e.props.active&&(C=!0)}));var D=(0,h.mx)(p()(o,"down"!==c&&"drop"+c,!(!m||!v)&&"active",!(!g||!C)&&"active",((e={})["input-group-"+x]=x,e["btn-group"]=u,e["btn-group-"+f]=!!f,e.dropdown=!u&&!x,e.show=l,e["nav-item"]=m,e)),i);return r.createElement(d.Provider,{value:this.getContextValue()},r.createElement(b.ZP,null,r.createElement(O,(0,a.Z)({},w,((t={})["string"==typeof O?"ref":"innerRef"]=this.containerRef,t),{onKeyDown:this.handleKeyDown,className:D}))))},t}(r.Component);w.propTypes=x,w.defaultProps={a11y:!0,isOpen:!1,direction:"down",nav:!1,active:!1,addonType:!1,inNavbar:!1,setActiveFromChild:!1};const O=w;var C=n(63351),D=n(97975),S=["className","color","cssModule","caret","split","nav","tag","innerRef"],E={caret:i().bool,color:i().string,children:i().node,className:i().string,cssModule:i().object,disabled:i().bool,onClick:i().func,"aria-haspopup":i().bool,split:i().bool,tag:h.iC,nav:i().bool},R=function(e){function t(t){var n;return(n=e.call(this,t)||this).onClick=n.onClick.bind((0,c.Z)(n)),n}(0,l.Z)(t,e);var n=t.prototype;return n.onClick=function(e){this.props.disabled||this.context.disabled?e.preventDefault():(this.props.nav&&!this.props.tag&&e.preventDefault(),this.props.onClick&&this.props.onClick(e),this.context.toggle(e))},n.getRole=function(){return this.context.menuRole||this.props["aria-haspopup"]},n.render=function(){var e,t=this,n=this.props,o=n.className,i=n.color,c=n.cssModule,l=n.caret,u=n.split,d=n.nav,f=n.tag,m=n.innerRef,g=(0,s.Z)(n,S),v=g["aria-label"]||"Toggle Dropdown",b=(0,h.mx)(p()(o,{"dropdown-toggle":l||u,"dropdown-toggle-split":u,"nav-link":d}),c),y=void 0!==g.children?g.children:r.createElement("span",{className:"sr-only"},v);return d&&!f?(e="a",g.href="#"):f?e=f:(e=D.Z,g.color=i,g.cssModule=c),this.context.inNavbar?r.createElement(e,(0,a.Z)({},g,{className:b,onClick:this.onClick,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:y})):r.createElement(C.Z,{innerRef:m},(function(n){var o,i=n.ref;return r.createElement(e,(0,a.Z)({},g,((o={})["string"==typeof e?"ref":"innerRef"]=i,o),{className:b,onClick:t.onClick,"aria-expanded":t.context.isOpen,"aria-haspopup":t.getRole(),children:y}))}))},t}(r.Component);R.propTypes=E,R.defaultProps={color:"secondary","aria-haspopup":!0},R.contextType=d;const j=R;var k=n(4942),P=n(73935),N=n(32281),I=["className","cssModule","right","tag","flip","modifiers","persist","positionFixed","container"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,k.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={tag:h.iC,children:i().node.isRequired,right:i().bool,flip:i().bool,modifiers:i().object,className:i().string,cssModule:i().object,persist:i().bool,positionFixed:i().bool,container:h.qW},T={flip:{enabled:!1}},L={up:"top",left:"left",right:"right",down:"bottom"},B=function(e){function t(){return e.apply(this,arguments)||this}(0,l.Z)(t,e);var n=t.prototype;return n.getRole=function(){return"listbox"===this.context.menuRole?"listbox":"menu"},n.render=function(){var e=this,t=this.props,n=t.className,o=t.cssModule,i=t.right,c=t.tag,l=t.flip,u=t.modifiers,d=t.persist,f=t.positionFixed,m=t.container,g=(0,s.Z)(t,I),v=(0,h.mx)(p()(n,"dropdown-menu",{"dropdown-menu-right":i,show:this.context.isOpen}),o),b=c;if(d||this.context.isOpen&&!this.context.inNavbar){var y=(L[this.context.direction]||"bottom")+"-"+(i?"end":"start"),x=l?u:Z(Z({},u),T),_=!!f,w=r.createElement(N.ZP,{placement:y,modifiers:x,positionFixed:_},(function(t){var n=t.ref,o=t.style,i=t.placement,s=Z(Z({},e.props.style),o);return r.createElement(b,(0,a.Z)({tabIndex:"-1",role:e.getRole(),ref:function(t){n(t);var r=e.context.onMenuRef;r&&r(t)}},g,{style:s,"aria-hidden":!e.context.isOpen,className:v,"x-placement":i}))}));return m?P.createPortal(w,(0,h.U9)(m)):w}return r.createElement(b,(0,a.Z)({tabIndex:"-1",role:this.getRole()},g,{"aria-hidden":!this.context.isOpen,className:v,"x-placement":g.placement}))},t}(r.Component);B.propTypes=M,B.defaultProps={tag:"div",flip:!0},B.contextType=d;const F=B;var Y=n(72446),U=n.n(Y),V=n(99985),K={insert:"head",singleton:!1};U()(V.Z,K);V.Z.locals;var W=n(64178),q=n(48521);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.image,n=e.isDefaultImage,o=e.onFileChange,i=e.onRemovePhoto,a=e.inputField,s=void 0===a?"userInput":a,c=e.buttonName,l=void 0===c?"image-picker.dropdown.profile.label":c,u=e.isRemoveOption,p=void 0===u||u,d=e.user,h=e.isFavicon,f=void 0!==h&&h,m=H((0,r.useState)(!1),2),g=m[0],b=m[1],y=function(){b(!g)},x=function(e){return(0,q.jsxs)(q.Fragment,{children:[(0,W.PV)(e)," Â ",(0,W.PV)(l)]})},_=function(){if(!n&&p)return(0,q.jsx)(v,{className:"text-center",onClick:function(){return i()},children:x("image-picker.dropdown.remove.label")})},w=f?"image__favicon-dropdown-btn":"image__dropdown-btn",C=f?"image__favicon-dropdown-menu":"image__dropdown-menu",D=f?"image__favicon-holder":"image__holder",S=f?"image__favicon-preview":"image__preview",E=f?"image__favicon-avatar-text":"image__avatar",R=f?"image__favicon-avatar-text":"image__avatar-text",k=f?120:200,P=f?120:200;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("input",{id:s,type:"file",onClick:function(e){return e.target.value=null},className:"d-none",onChange:function(e){return o(e)},accept:"image/*"}),(0,q.jsxs)("div",{className:D,children:[t?(0,q.jsx)("img",{src:t||null,className:"".concat(S," mx-auto d-block"),height:k,width:P,alt:t}):(0,q.jsx)("div",{className:E,children:(0,q.jsx)("span",{className:R,children:(0,W.g4)(d?d.name:null)})}),(0,q.jsxs)(O,{isOpen:g,toggle:y,children:[(0,q.jsx)(j,{className:w,children:x(n?"image-picker.dropdown.add.label":"image-picker.dropdown.change.label")}),(0,q.jsxs)(F,{className:C,children:[(0,q.jsx)(v,{className:"text-center",onClick:function(){document.getElementById(s).click()},children:x(n?"image-picker.dropdown.add.label":"image-picker.dropdown.change.label")}),_(),(0,q.jsx)(v,{className:"text-center",children:(0,W.PV)("global.input.cancel-btn.label")})]})]})]})]})};X.propTypes={user:i().object,image:i().string,inputField:i().string,buttonName:i().string,isDefaultImage:i().bool,isRemoveOption:i().bool,onFileChange:i().func,onRemovePhoto:i().func};const G=X},82809:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(23645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".settings .image__preview{-o-object-fit:contain;object-fit:contain}@media(max-width:1544px){html[dir=rtl] .settings__form{max-width:77%;right:6.3%}}@media(max-width:1250px){html[dir=rtl] .settings__form{max-width:73%;right:10.3%}}@media(max-width:1544px){.settings__form{left:6.3%;max-width:77%}}@media(max-width:1250px){.settings__form{left:10.3%;max-width:73%}}@media(max-width:1060px){.settings{align-items:center;flex-direction:column}.settings .settings__favicon,.settings .settings__logo{margin-bottom:30px;max-width:100%;width:100%}.settings .settings__favicon .settings__favicon-heading,.settings .settings__favicon .settings__logo-heading,.settings .settings__logo .settings__favicon-heading,.settings .settings__logo .settings__logo-heading{margin-left:calc(1px + 15%)}.settings__form{left:0;max-width:100%!important;right:0!important;width:100%}.settings__form .settings__form-columns{flex-direction:column}.settings__form .settings__form-columns .col-6{width:100%}}.input-group-prepend .input-group-text{min-width:45px!important}.react-select__input{width:calc(100% - 45px)!important}",""]);const i=o},99985:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(23645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".image__holder{background:gray;border-radius:10px;cursor:pointer;margin:auto;position:relative;width:200px}@media(max-width:576px){.image__holder{width:185px}}.image__holder .btn-secondary:focus{box-shadow:none!important;outline:none!important}.image__favicon-holder{background:gray;border-radius:10px;cursor:pointer;margin:auto;position:relative;width:120px}.image__favicon-holder .btn-secondary:focus{box-shadow:none!important;outline:none!important}.image__preview{width:100%}.image__favicon-preview,.image__preview{border-radius:10px;-o-object-fit:cover;object-fit:cover;text-align:center}.image__dropdown-btn{background-color:#e2e2e28f!important;height:96px;left:25%;top:-146px;width:100px}.image__dropdown-btn,.image__favicon-dropdown-btn{border:0!important;font-size:13px;font-weight:700;position:absolute;white-space:normal}.image__favicon-dropdown-btn{height:76px;left:18%;top:-96px;width:74px}.image__dropdown-menu{left:-32px!important;top:-37px!important}.image__favicon-dropdown-menu{font-size:13px;left:-31px!important;min-width:70px;top:-37px!important}.image__avatar{align-items:center;display:flex;height:200px;justify-content:center;position:relative}.image__avatar-text{background-color:#7d68f0;border-radius:50%;color:#fff;font-size:50px;height:auto;padding:50px}.image__favicon-avatar{align-items:center;display:flex;height:120px;justify-content:center;position:relative}.image__favicon-avatar-text{background-color:#7d68f0;border-radius:50%;color:#fff;font-size:50px;height:auto;padding:50px}",""]);const i=o},96120:function(e,t,n){var r;e.exports=(r=n(67294),(()=>{var e={703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},427:e=>{"use strict";e.exports=r}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";n.r(o),n.d(o,{Component:()=>D,containCrop:()=>O,default:()=>D,makeAspectCrop:()=>x});var e=n(427),t=n.n(e),r=n(697),i=n.n(r);function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n){return Math.min(Math.max(e,t),n)}function b(e){return e&&!isNaN(e.width)&&!isNaN(e.height)}function y(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function x(e,t,n){if(isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),e;var r=m({unit:"px",x:0,y:0},e);return e.width&&(r.height=r.width/e.aspect),e.height&&(r.width=r.height*e.aspect),r.y+r.height>n&&(r.height=n-r.y,r.width=r.height*e.aspect),r.x+r.width>t&&(r.width=t-r.x,r.height=r.width/e.aspect),r}function _(e,t,n){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/n*100,width:e.width/t*100,height:e.height/n*100}}function w(e,t,n){return e.unit?"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*n/100,width:e.width*t/100,height:e.height*n/100}:m(m({},e),{},{unit:"px"})}function O(e,t,n,r){var o=w(t,n,r),i=w(e,n,r),a=m({},o);if(!o.aspect)return o.x<0?(a.x=0,a.width+=o.x):o.x+o.width>n&&(a.width=n-o.x),o.y+o.height>r&&(a.height=r-o.y),a;var s=!1;o.x<0?(a.x=0,a.width+=o.x,a.height=a.width/o.aspect,s=!0):o.x+o.width>n&&(a.width=n-o.x,a.height=a.width/o.aspect,s=!0),s&&i.y>a.y&&(a.y=o.y+(o.height-a.height));var c=!1;return a.y+a.height>r&&(a.height=r-o.y,a.width=a.height*o.aspect,c=!0),c&&i.x>a.x&&(a.x=o.x+(o.width-a.width)),a}var C={capture:!0,passive:!1},D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function s(){var e;c(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(d(e=i.call.apply(i,[this].concat(n))),"window","undefined"!=typeof window?window:{}),g(d(e),"document","undefined"!=typeof document?document:{}),g(d(e),"state",{}),g(d(e),"keysDown",new Set),g(d(e),"onCropPointerDown",(function(t){var n=e.props,r=n.crop,o=n.disabled,i=e.mediaDimensions,a=w(r,i.width,i.height);if(!o){t.cancelable&&t.preventDefault(),e.bindDocMove(),e.componentRef.focus({preventScroll:!0});var s=t.target.dataset.ord,c="nw"===s||"w"===s||"sw"===s,l="nw"===s||"n"===s||"ne"===s;e.evData={clientStartX:t.clientX,clientStartY:t.clientY,cropStartWidth:a.width,cropStartHeight:a.height,cropStartX:c?a.x+a.width:a.x,cropStartY:l?a.y+a.height:a.y,xInversed:c,yInversed:l,xCrossOver:c,yCrossOver:l,startXCrossOver:c,startYCrossOver:l,isResize:t.target.dataset.ord,ord:s},e.mouseDownOnCrop=!0,e.setState({cropIsActive:!0})}})),g(d(e),"onComponentPointerDown",(function(t){var n=e.props,r=n.crop,o=n.disabled,i=n.locked,a=n.keepSelection,s=n.onChange,c=e.mediaWrapperRef.firstChild;if(t.target===c&&c.contains(t.target)&&!(o||i||a&&b(r))){t.cancelable&&t.preventDefault(),e.bindDocMove(),e.componentRef.focus({preventScroll:!0});var l=e.mediaWrapperRef.getBoundingClientRect(),u=t.clientX-l.left,p=t.clientY-l.top,d={unit:"px",aspect:r?r.aspect:void 0,x:u,y:p,width:0,height:0};e.evData={clientStartX:t.clientX,clientStartY:t.clientY,cropStartWidth:d.width,cropStartHeight:d.height,cropStartX:d.x,cropStartY:d.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},e.mouseDownOnCrop=!0;var h=e.mediaDimensions,f=h.width,m=h.height;s(w(d,f,m),_(d,f,m)),e.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}})),g(d(e),"onDocPointerMove",(function(t){var n=e.props,r=n.crop,o=n.disabled,i=n.onChange,a=n.onDragStart;if(!o&&e.mouseDownOnCrop){t.cancelable&&t.preventDefault(),e.dragStarted||(e.dragStarted=!0,a(t));var s,c=d(e).evData;if(c.xDiff=t.clientX-c.clientStartX,c.yDiff=t.clientY-c.clientStartY,(s=c.isResize?e.resizeCrop():e.dragCrop())!==r){var l=e.mediaDimensions,u=l.width,p=l.height;i(w(s,u,p),_(s,u,p))}}})),g(d(e),"onComponentKeyDown",(function(t){var n=e.props,r=n.crop,o=n.disabled,i=n.onChange,a=n.onComplete;if(!o){e.keysDown.add(t.key);var c=!1;if(b(r)){var l=e.makeNewCrop(),u=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?s.nudgeStepLarge:t.shiftKey?s.nudgeStepMedium:s.nudgeStep;if(e.keysDown.has("ArrowLeft")&&(l.x-=u,c=!0),e.keysDown.has("ArrowRight")&&(l.x+=u,c=!0),e.keysDown.has("ArrowUp")&&(l.y-=u,c=!0),e.keysDown.has("ArrowDown")&&(l.y+=u,c=!0),c){t.cancelable&&t.preventDefault();var p=e.mediaDimensions,d=p.width,h=p.height;l.x=v(l.x,0,d-l.width),l.y=v(l.y,0,h-l.height);var f=w(l,d,h),m=_(l,d,h);i(f,m),a(f,m)}}}})),g(d(e),"onComponentKeyUp",(function(t){e.keysDown.delete(t.key)})),g(d(e),"onDocPointerDone",(function(t){var n=e.props,r=n.crop,o=n.disabled,i=n.onComplete,a=n.onDragEnd;if(e.unbindDocMove(),!o&&e.mouseDownOnCrop){e.mouseDownOnCrop=!1,e.dragStarted=!1;var s=e.mediaDimensions,c=s.width,l=s.height;a(t),i(w(r,c,l),_(r,c,l)),e.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}})),g(d(e),"onMediaLoaded",(function(){var t=e.props,n=t.onComplete,r=t.onChange,o=e.createNewCrop(),i=o.pixelCrop,a=o.percentCrop;r(i,a),n(i,a)})),g(d(e),"onImageLoad",(function(t){var n=t.target,r=e.props,o=r.onComplete,i=r.onChange;if(!1!==(0,r.onImageLoaded)(n)){var a=e.createNewCrop(),s=a.pixelCrop,c=a.percentCrop;i(s,c),o(s,c)}})),g(d(e),"bindComponentRef",(function(t){e.componentRef=t})),g(d(e),"bindMediaWrapperRef",(function(t){e.mediaWrapperRef=t})),g(d(e),"bindImageRef",(function(t){e.imageRef=t})),g(d(e),"bindCropSelectionRef",(function(t){e.cropSelectRef=t})),e}return(n=[{key:"componentDidMount",value:function(){this.componentRef.addEventListener&&this.componentRef.addEventListener("medialoaded",this.onMediaLoaded)}},{key:"componentWillUnmount",value:function(){this.componentRef.removeEventListener&&this.componentRef.removeEventListener("medialoaded",this.onMediaLoaded)}},{key:"componentDidUpdate",value:function(e){var t=this.props.crop;if(this.imageRef&&e.crop!==t&&t.aspect&&(t.width&&!t.height||!t.width&&t.height)){var n=this.imageRef,r=n.width,o=n.height,i=x(this.makeNewCrop(),r,o),a=w(i,r,o),s=_(i,r,o);this.props.onChange(a,s),this.props.onComplete(a,s)}}},{key:"bindDocMove",value:function(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,C),this.document.addEventListener("pointerup",this.onDocPointerDone,C),this.document.addEventListener("pointercancel",this.onDocPointerDone,C),this.docMoveBound=!0)}},{key:"unbindDocMove",value:function(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,C),this.document.removeEventListener("pointerup",this.onDocPointerDone,C),this.document.removeEventListener("pointercancel",this.onDocPointerDone,C),this.docMoveBound=!1)}},{key:"createNewCrop",value:function(){var e,t,n,r=this.mediaDimensions,o=r.width,i=r.height,a=(t=o,n=i,!(e=this.makeNewCrop()).aspect||e.width&&e.height?e:x(e,t,n));return{pixelCrop:w(a,o,i),percentCrop:_(a,o,i)}}},{key:"mediaDimensions",get:function(){var e=this.mediaWrapperRef;return{width:e.clientWidth,height:e.clientHeight}}},{key:"getCropStyle",value:function(){var e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:"".concat(e.y).concat(e.unit),left:"".concat(e.x).concat(e.unit),width:"".concat(e.width).concat(e.unit),height:"".concat(e.height).concat(e.unit)}}},{key:"getNewSize",value:function(){var e,t=this.props,n=t.crop,r=t.minWidth,o=t.maxWidth,i=t.minHeight,a=t.maxHeight,s=this.evData,c=this.mediaDimensions,l=c.width,u=c.height,p=s.cropStartWidth+s.xDiff;return s.xCrossOver&&(p=Math.abs(p)),p=v(p,r,o||l),e=n.aspect?p/n.aspect:s.cropStartHeight+s.yDiff,s.yCrossOver&&(e=Math.min(Math.abs(e),s.cropStartY)),e=v(e,i,a||u),n.aspect&&(p=v(e*n.aspect,0,l)),{width:p,height:e}}},{key:"dragCrop",value:function(){var e=this.makeNewCrop(),t=this.evData,n=this.mediaDimensions,r=n.width,o=n.height;return e.x=v(t.cropStartX+t.xDiff,0,r-e.width),e.y=v(t.cropStartY+t.yDiff,0,o-e.height),e}},{key:"resizeCrop",value:function(){var e=this.evData,t=this.makeNewCrop(),n=e.ord;e.xInversed&&(e.xDiff-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight);var r=this.getNewSize(),o=e.cropStartX,i=e.cropStartY;e.xCrossOver&&(o=t.x+(t.width-r.width)),e.yCrossOver&&(i=!1===e.lastYCrossover?t.y-r.height:t.y+(t.height-r.height));var a=this.mediaDimensions,c=a.width,l=a.height,u=O(this.props.crop,{unit:t.unit,x:o,y:i,width:r.width,height:r.height,aspect:t.aspect},c,l);return t.aspect||s.xyOrds.indexOf(n)>-1?(t.x=u.x,t.y=u.y,t.width=u.width,t.height=u.height):s.xOrds.indexOf(n)>-1?(t.x=u.x,t.width=u.width):s.yOrds.indexOf(n)>-1&&(t.y=u.y,t.height=u.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),t.width<this.props.minWidth||t.height<this.props.minHeight?this.props.crop:t}},{key:"createCropSelection",value:function(){var e=this.props,n=e.disabled,r=e.locked,o=e.renderSelectionAddon,i=e.ruleOfThirds,a=e.crop,s=this.getCropStyle();return t().createElement("div",{ref:this.bindCropSelectionRef,style:s,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown},!n&&!r&&t().createElement("div",{className:"ReactCrop__drag-elements"},t().createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w"})),o&&b(a)&&t().createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:function(e){return e.stopPropagation()}},o(this.state)),i&&t().createElement(t().Fragment,null,t().createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),t().createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}},{key:"makeNewCrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"px",t=m(m({},s.defaultCrop),this.props.crop||{}),n=this.mediaDimensions,r=n.width,o=n.height;return"px"===e?w(t,r,o):_(t,r,o)}},{key:"crossOverCheck",value:function(){var e=this.evData,t=this.props,n=t.minWidth,r=t.minHeight;!n&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!r&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver);var o=e.xCrossOver!==e.startXCrossOver,i=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!o&&y(e.ord),e.inversedYOrd=!!i&&y(e.ord)}},{key:"render",value:function(){var e=this.props,n=e.children,r=e.circularCrop,o=e.className,i=e.crossorigin,s=e.crop,c=e.disabled,l=e.locked,u=e.imageAlt,p=e.onImageError,d=e.renderComponent,h=e.src,f=e.style,m=e.imageStyle,g=e.ruleOfThirds,v=this.state,y=v.cropIsActive,x=v.newCropIsBeingDrawn,_=b(s)&&this.componentRef?this.createCropSelection():null,w=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}("ReactCrop",o,{"ReactCrop--active":y,"ReactCrop--disabled":c,"ReactCrop--locked":l,"ReactCrop--new-crop":x,"ReactCrop--fixed-aspect":s&&s.aspect,"ReactCrop--circular-crop":s&&r,"ReactCrop--rule-of-thirds":s&&g,"ReactCrop--invisible-crop":!this.dragStarted&&s&&!s.width&&!s.height});return t().createElement("div",{ref:this.bindComponentRef,className:w,style:f,onPointerDown:this.onComponentPointerDown,tabIndex:0,onKeyDown:this.onComponentKeyDown,onKeyUp:this.onComponentKeyUp},t().createElement("div",{ref:this.bindMediaWrapperRef},d||t().createElement("img",{ref:this.bindImageRef,crossOrigin:i,className:"ReactCrop__image",style:m,src:h,onLoad:this.onImageLoad,onError:p,alt:u})),n,_)}}])&&l(s.prototype,n),s}(e.PureComponent);D.xOrds=["e","w"],D.yOrds=["n","s"],D.xyOrds=["nw","ne","se","sw"],D.nudgeStep=1,D.nudgeStepMedium=10,D.nudgeStepLarge=100,D.defaultCrop={x:0,y:0,width:0,height:0,unit:"px"},D.propTypes={className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]),circularCrop:i().bool,crop:i().shape({aspect:i().number,x:i().number,y:i().number,width:i().number,height:i().number,unit:i().oneOf(["px","%"])}),crossorigin:i().string,disabled:i().bool,locked:i().bool,imageAlt:i().string,imageStyle:i().shape({}),keepSelection:i().bool,minWidth:i().number,minHeight:i().number,maxWidth:i().number,maxHeight:i().number,onChange:i().func.isRequired,onImageError:i().func,onComplete:i().func,onImageLoaded:i().func,onDragStart:i().func,onDragEnd:i().func,src:i().string.isRequired,style:i().shape({}),renderComponent:i().node,renderSelectionAddon:i().func,ruleOfThirds:i().bool},D.defaultProps={circularCrop:!1,className:void 0,crop:void 0,crossorigin:void 0,disabled:!1,locked:!1,imageAlt:"",maxWidth:void 0,maxHeight:void 0,minWidth:0,minHeight:0,keepSelection:!1,onComplete:function(){},onImageError:function(){},onImageLoaded:function(){},onDragStart:function(){},onDragEnd:function(){},children:void 0,style:void 0,renderComponent:void 0,imageStyle:void 0,renderSelectionAddon:void 0,ruleOfThirds:!1}})(),o})())}}]);